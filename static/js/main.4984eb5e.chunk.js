(this.webpackJsonplm=this.webpackJsonplm||[]).push([[0],{26:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n(1),a=n.n(i),r=n(28),s=n.n(r),o=n(9),u=n(3),l=n(23),j=n.n(l),d=n(15),f=n(29),b=a.a.createContext({config:{},metadata:{},root:"",width:200,setRoot:function(e){},setConfig:function(e){},setMetadata:function(e){},updateClientWidth:function(){}}),h={};function O(e){var t=new XMLHttpRequest;return t.open("get",e),t.send(null),console.log("call loadFile"),new Promise((function(n,c){t.onload=function(){4===t.readyState&&(200===t.status?n(t.responseText):c("Load file "+e+" failed."))}}))}function m(e){var t=new Image;return t.crossOrigin="",t.src=e+"?t="+Math.random(),new Promise((function(e,n){t.onload=function(n){e(t)}}))}function p(e){return x.apply(this,arguments)}function x(){return(x=Object(f.a)(j.a.mark((function e(t){var n,c,i,a,r,s,o,u,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object.keys(t).map((function(e){return{imageObj:null,index:t[e].pic.index,path:t[e].pic.path,id:t[e].pic.picId}})),c=Object(d.a)(n),e.prev=2,c.s();case 4:if((i=c.n()).done){e.next=15;break}if(a=i.value,!h[a.id]){e.next=10;break}a.imageObj=h[a.id],e.next=13;break;case 10:return e.next=12,m(a.path);case 12:a.imageObj=e.sent;case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),c.e(e.t0);case 20:return e.prev=20,c.f(),e.finish(20);case 23:(r=document.createElement("canvas")).width=n[0].imageObj.width,r.height=n[0].imageObj.height,(s=r.getContext("2d")).fillStyle="#ffffff",null===s||void 0===s||s.fillRect(0,0,r.width,r.height),n.sort((function(e,t){return e.index-t.index})),o=Object(d.a)(n);try{for(o.s();!(u=o.n()).done;)(l=u.value).imageObj&&(null===s||void 0===s||s.drawImage(l.imageObj,0,0))}catch(j){o.e(j)}finally{o.f()}return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,null,[[2,17,20,23]])})))).apply(this,arguments)}function g(){var e=navigator.userAgent.toLowerCase();return!!(/micromessenger/g.test(e)||/weibo/g.test(e)||/qq/g.test(e))}n(26);var v=n(10),y=n(7),k=n(32),w=n(16),C=n(17),N=n(19),S=n(18),I=n(30),M=n(0);function P(e){function t(){Object(I.saveAs)(new Blob([e.fileContent],{type:"text/plain;charset=utf-8"}),e.filename)}return Object(M.jsx)("a",{href:"#",onClick:function(){return t()},className:e.className,children:e.children})}function E(e){var t=Object(i.useState)(""),n=Object(c.a)(t,2),a=n[0],r=n[1];return function(e){if(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){var t;(null===(t=e.target)||void 0===t?void 0:t.result)!==a&&r(e.target.result)}}}(e.imageFile),console.log("showimage repeat exec test"),Object(M.jsx)("img",{src:a,alt:""})}function R(e){var t=Object(i.useRef)(null);return Object(i.useEffect)((function(){t.current&&(t.current.setAttribute("webkitdirectory",""),t.current.setAttribute("directory",""),t.current.setAttribute("multiple",""))}),[t]),Object(M.jsx)("div",{children:Object(M.jsx)("input",{type:"file",name:"file",ref:t,onChange:function(t){e.handleOutput(t.target.files)}})})}var A=function(e){Object(N.a)(n,e);var t=Object(S.a)(n);function n(e){var c;return Object(w.a)(this,n),(c=t.call(this,e)).canvasObj=void 0,c.canvasObj=a.a.createRef(),c}return Object(C.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.imageObjs.forEach((function(t){try{e.draw(t)}catch(n){console.log(n.message)}}))}},{key:"draw",value:function(e){var t,n=e.width,i=e.height,a=Object(c.a)(this.props.canvasSize,2),r=a[0],s=a[1],o=this.props.border;this.canvasObj.current.width=r,this.canvasObj.current.height=s;var u=this.canvasObj.current.getContext("2d");null===u||void 0===u||u.drawImage(e,0,0,r,s);var l,j=function(e){for(var t=e.data,n=e.width,c=e.height,i=function(e,t){return(e-1)*n*4+4*(t-1)},a=-1,r=-1,s=-1,o=-1,u=1;u<=c;u++){for(var l=1;l<n;l++)if(0!==t[i(u,l)+3]){r=u-1;break}if(-1!==r)break}for(var j=1;j<=n;j++){for(var d=1;d<=c;d++)if(0!==t[i(d,j)+3]){a=j-1;break}if(-1!==a)break}for(var f=c;f>=1;f--){for(var b=1;b<=n;b++)if(0!==t[i(f,b)+3]){o=f-r;break}if(-1!==o)break}for(var h=n;h>=1;h--){for(var O=1;O<=c;O++)if(0!==t[i(O,h)+3]){s=h-a;break}if(-1!==s)break}return[a,r,s,o]}(u.getImageData(0,0,r,s)),d=Object(c.a)(j,4),f=d[0],b=d[1],h=d[2],O=d[3];null===u||void 0===u||u.clearRect(0,0,r,s),l=h>O?[o,(s-(r-2*o)/h*O)/2,r-2*o,(r-2*o)/h*O]:[(r-(s-2*o)/O*h)/2,o,(s-2*o)/O*h,s-2*o],(t=u).drawImage.apply(t,[e,f/r*n,b/s*i,h/r*n,O/s*i].concat(Object(k.a)(l)))}},{key:"render",value:function(){return Object(M.jsx)("canvas",{ref:this.canvasObj})}}]),n}(a.a.Component),J=function(e){Object(N.a)(n,e);var t=Object(S.a)(n);function n(e){return Object(w.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"onCloseBtnClick",value:function(){this.setState({isOpen:!1})}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e={position:"absolute",width:"100%",top:0,left:0,zIndex:200,visibility:null===this.props.content?"hidden":"visible"};return Object(M.jsx)("div",{style:{position:"relative"},children:Object(M.jsx)("div",{className:"popup",style:e,children:this.props.content?Object(M.jsx)("img",{style:{width:"100%"},src:this.props.content,alt:""}):Object(M.jsx)("div",{})})})}}]),n}(a.a.Component);var D,F=Object(u.f)((function(e){var t=e.history;return Object(i.useEffect)((function(){var e=t.listen((function(){window.scrollTo(0,0)}));return function(){return e()}})),null})),B="mini",L="pics",z=n(20);function T(e){return z.Md5.hashStr(e)}function W(e){for(var t={},n=[],c=0,i=Array.from(e);c<i.length;c++){var a=i[c],r=a.webkitRelativePath,s=a.name,o=r.split("/");if(o[1]===L){var u=o.slice(1,3).join("/")+"/"+o[o.length-1],l=T(u);t[l]||(n.push(l),t[l]={}),o[3]===B?t[l].miniPath=o.slice(1).join("/"):(t[l].path=u,t[l].id=l,t[l].filename=s)}}return{hash:_(n),data:t}}function _(e){return T(e.sort((function(e,t){return e>t?1:-1})).join(""))}function q(e){var t,n={},c=function(e){return/default\..*\.png/g.test(e)},i=function(e){return e.replace("default.","").replace(".png","")};for(var a in e){var r=e[a],s=r.path.split("/")[1];if(n[s]||(n[s]={info:{title:s,icon:"",defaultPic:""},items:{}}),t=r.filename,/icon\.png/g.test(t))n[s].info.icon=r.path;else{c(r.filename)&&(n[s].info.defaultPic=a);var o=i(r.filename);n[s].items[o]={title:o,pic:{picId:a,defaultPosition:[0,0]}}}}return n}function U(e,t){var n=Array.from(t),c=q(W(t).data),i=function(e){var t,c=Object(d.a)(n);try{for(c.s();!(t=c.n()).done;){var i=t.value.webkitRelativePath.split("/");if(i[1].split(".")[0]===e)return i.join("/")}}catch(a){c.e(a)}finally{c.f()}return""};return{root:"/sources/"+n[0].webkitRelativePath.split("/")[0]+"/",info:{author:e.info.author,interface:{headImg:i("headImg"),footerImg:i("footerImg"),backgroundImg:i("backgroundImg"),footerText:e.info.interface.footerText,previewHeight:100,previewWidth:100},cover:i("cover"),title:e.info.title},category:function(e,t){var n={};return Object.keys(t).forEach((function(c){var i=t[c],a=e[c];n[c]={info:{title:c,icon:i.info.icon,defaultPic:i.info.defaultPic,allowBlank:a.allowBlank,hide:a.hide,index:a.index},items:Object.keys(i.items).map((function(e){return i.items[e]}))}})),n}(e.category,c)}}function X(e,t,n){var c={};return Object.keys(t).forEach((function(i){var a=t[i];if(a.info.defaultPic){var r=a.info.defaultPic;c[i]=H(e,t,n,i,r)}})),c}function H(e,t,n,c,i){var a=e,r=t[c],s=n,o=r.items.find((function(e){return e.pic.picId===i})),u=s[i];return{itemId:r.items.findIndex((function(e){return e.pic.picId===i})),itemTitle:o.title,pic:{picId:i,path:a+u.path,miniPath:a+(u.miniPath||u.path),position:o.pic.defaultPosition,size:[100,100],index:r.info.index}}}!function(e){e[e.SelectItem=0]="SelectItem",e[e.Download=1]="Download"}(D||(D={}));var Q=a.a.createContext({curCategoryName:"",action:D.SelectItem,setSelectItem:function(){},setDownload:function(){},setCurCategoryName:function(e){}}),G=function(e){var t,n=Object(i.useContext)(b),a=Object(i.useState)(e),r=Object(c.a)(a,2),s=r[0],o=r[1],u=Object(i.useState)((t=n.config,Object.keys(t.category).find((function(e){return 1===t.category[e].info.index})))),l=Object(c.a)(u,2);return{action:s,curCategoryName:l[0],setSelectItem:function(){o(D.SelectItem)},setDownload:function(){o(D.Download)},setCurCategoryName:l[1]}};function K(e){var t=Object.keys(e.userData).map((function(t){var n=e.userData[t],c=n.pic;return Object(M.jsx)("div",{style:{position:"absolute",top:0,left:0,zIndex:n.pic.index},children:Object(M.jsx)("img",{width:"100%",height:"100%",src:c.miniPath||c.path,alt:n.itemTitle})},n.pic.picId)}));return Object(M.jsx)("div",{className:"preview",style:{position:"relative",width:e.width,paddingTop:"100%"},children:t})}function V(e){var t=Object(i.useState)(Object(M.jsx)("div",{})),n=Object(c.a)(t,2),a=n[0],r=n[1],s=Object(i.useRef)(function(e,t){if(h[e])return h[e];var n=new Image;return n.crossOrigin="",n.src=t+"?t="+Math.random(),h[e]=n,n}(e.picId,e.path));function o(){r(Object(M.jsx)(A,{imageObjs:[s.current],canvasSize:[e.size,e.size],border:5}))}return Object(i.useEffect)((function(){s.current.complete?o():s.current.onload=function(){o()}}),[s]),Object(M.jsx)("div",{style:{width:e.size+"px",height:e.size+"px"},children:a})}function Y(e){var t=Object(i.useContext)(b),n=Object(i.useContext)(Q);function c(t,c){n.setSelectItem(),e.handleOutput(t,c)}var a=e.itemSize,r=t.root,s=t.config.category[n.curCategoryName],o=t.metadata.data,u=s.items.slice();s.info.allowBlank&&u.unshift({title:"",pic:{picId:"",defaultPosition:[0,0]}});var l=u.map((function(t){if(!t.pic.picId)return Object(M.jsx)("div",{onClick:function(){return c(t.title,t.pic.picId)},className:(e.selectedItem===t.title?"selected-item":"")+" item",style:{width:a+"px",height:a+"px"}},"");var n=o[t.pic.picId],i=r+(n.miniPath||n.path);return Object(M.jsx)("div",{onClick:function(){return c(t.title,t.pic.picId)},className:(e.selectedItem===t.title?"selected-item":"")+" item",children:Object(M.jsx)(V,{size:a,path:i,picId:t.pic.picId})},i)}));return Object(M.jsx)("div",{className:"items",children:l})}function Z(){var e=Object(i.useContext)(b),t=Object(i.useContext)(Q),n=e.width,c=e.config.category,a=Object.keys(c).sort((function(e,t){return c[e].info.index-c[t].info.index})).map((function(e){var i=c[e].info;return i.hide?Object(M.jsx)("div",{},e):Object(M.jsx)(Q.Consumer,{children:function(c){return Object(M.jsxs)("div",{className:(c.curCategoryName===e?"selected-category":"")+" category-item",style:{width:n/4+"px",height:n/4/1.8+"px"},children:[i.icon&&Object(M.jsx)("img",{src:i.icon,alt:""}),Object(M.jsx)("button",{onClick:function(){return t.setCurCategoryName(e)},children:e})]})}},e)}));return Object(M.jsx)("div",{className:"category",children:a})}function $(){var e=Object(i.useContext)(b),t=Object(i.useContext)(Q),n=Object(i.useState)(X(e.root,e.config.category,e.metadata.data)),a=Object(c.a)(n,2),r=a[0],s=a[1],o=Object(i.useState)(""),u=Object(c.a)(o,2),l=u[0],j=u[1];Object(i.useEffect)((function(){t.action===D.SelectItem&&j("")}),[t.action]);var d=e.width,f=r[t.curCategoryName];return Object(M.jsxs)("div",{children:[Object(M.jsx)(Q.Consumer,{children:function(e){return e.action===D.Download&&Object(M.jsx)(J,{content:l})}}),Object(M.jsx)(K,{width:"100%",userData:r}),Object(M.jsx)(Z,{}),Object(M.jsx)(Y,{handleOutput:function(n,c){if(""===n)return delete r[t.curCategoryName],void s(Object(y.a)({},r));r[t.curCategoryName]&&r[t.curCategoryName].itemTitle===n||s(Object(y.a)(Object(y.a)({},r),{},Object(v.a)({},t.curCategoryName,H(e.root,e.config.category,e.metadata.data,t.curCategoryName,c))))},selectedItem:f?f.itemTitle:"",itemSize:d/3}),Object(M.jsx)("button",{className:"download-btn",onClick:function(){return function(){t.setDownload();var e=p(r);g()?e.then((function(e){j(e.toDataURL())})):e.then((function(e){e.toBlob((function(e){saveAs(e,"output.png")}))}))}()},children:"\u4e0b\u8f7d"})]})}function ee(e){var t=Object(i.useContext)(b);return Object(M.jsx)("div",{className:"main",children:Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)("header",{className:"header"}),Object(M.jsxs)("div",{className:"body",children:[Object(M.jsx)(Q.Provider,{value:G(D.SelectItem),children:Object(M.jsx)($,{})}),g()?Object(M.jsx)("p",{className:"warning",children:"\u6e29\u99a8\u63d0\u793a\uff1a\u4f60\u5f53\u524d\u5728APP\u5185\u7f6e\u6d4f\u89c8\u5668\u4e2d\uff0c\u82e5\u60f3\u4fdd\u5b58\u56fe\u7247\u8bf7\u70b9\u51fb\u4e0b\u8f7d\u6309\u94ae\u540e\u957f\u6309\u4e0a\u65b9\u9884\u89c8\u533a\u4fdd\u5b58"}):Object(M.jsx)("p",{className:"warning",children:t.config.info.interface.footerText})]}),Object(M.jsxs)("div",{className:"page-footer",children:[Object(M.jsx)(o.b,{className:"link",to:e.rootName+"/auto",children:"\u53bb\u4f7f\u7528id\u81ea\u52a8\u751f\u6210"}),Object(M.jsx)(o.b,{className:"link",to:"create",children:"\u6211\u4e5f\u8981\u5236\u4f5c\u4e00\u4e2a\u634f\u8138\u6e38\u620f"}),Object(M.jsxs)("a",{target:"_blank",className:"link",href:"//"+t.config.info.author.website,children:["\u4f5c\u8005\uff1a",t.config.info.author.name||"\u533f\u540d"]})]})]})})}var te,ne;n(46),n(47);(ne=te||(te={}))[ne.Editing=0]="Editing",ne[ne.Confirmed=1]="Confirmed";var ce=a.a.createContext({action:te.Editing,setEditing:function(){},setConfirmed:function(){}}),ie=function(e){var t=Object(i.useState)(e),n=Object(c.a)(t,2),a=n[0],r=n[1];return{action:a,setEditing:function(){r(te.Editing)},setConfirmed:function(){r(te.Confirmed)}}};function ae(e){var t=Object(i.useMemo)((function(){return q(e.picsMetadata)}),[e.picsMetadata]),n=Object(i.useState)(o(t)),a=Object(c.a)(n,2),r=a[0],s=a[1];function o(e){var t={},n=1;for(var c in e)t[c]={title:c,allowBlank:!1,hide:!1,index:n++};return t}function u(t,n,c){switch(c){case"allowBlank":r[n].allowBlank=!r[n].allowBlank;break;case"hide":r[n].hide=!r[n].hide;break;case"index":r[n].index=parseInt(t)}s(Object(y.a)({},r)),e.handleOutput(JSON.parse(JSON.stringify(r)))}Object(i.useEffect)((function(){s(o(t)),e.handleOutput(JSON.parse(JSON.stringify(r)))}),[e.picsMetadata]);var l=Object.keys(t).length,j=Object.keys(t).map((function(e){return Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:Object(M.jsx)("span",{children:t[e].info.title})}),Object(M.jsx)("td",{children:Object(M.jsx)("input",{onChange:function(t){return u(t.target.value,e,"allowBlank")},checked:r[e].allowBlank,name:e+"-allowBlank",type:"checkbox"})}),Object(M.jsx)("td",{children:Object(M.jsx)("input",{onChange:function(t){return u(t.target.value,e,"hide")},checked:r[e].hide,name:e+"-hide",type:"checkbox"})}),Object(M.jsx)("td",{children:Object(M.jsx)("select",{onChange:function(t){return u(t.target.value,e,"index")},name:e+"-index",value:r[e].index,children:Array.from(Array(l)).map((function(e,t){return Object(M.jsxs)("option",{value:t+1,children:[" ",t+1]},t+1)}))})})]},e)}));return Object(M.jsx)("div",{className:"form-category-data",children:Object(M.jsxs)("table",{children:[Object(M.jsx)("thead",{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:"\u7c7b\u522b"}),Object(M.jsx)("td",{children:"\u5141\u8bb8\u8be5\u7c7b\u522b\u6709\u7a7a\u767d\u9879"}),Object(M.jsx)("td",{children:"\u8be5\u7c7b\u522b\u4e0d\u5141\u8bb8\u9009\u62e9"}),Object(M.jsx)("td",{children:"\u5c42\u5e8f\uff08\u6570\u5b57\u5927\u7684\u5728\u4e0a\u9762\uff09"})]})}),Object(M.jsx)("tbody",{children:j})]})})}var re=function(e){var t=Object(i.useContext)(ce),n=Object(i.useRef)({name:"",email:"",website:""}),c=Object(i.useRef)({footerText:""}),a=Object(i.useRef)(""),r=Object(i.useRef)({});function s(e,i){switch(i){case"name":case"email":case"website":n.current=Object(y.a)(Object(y.a)({},n.current),{},Object(v.a)({},i,e.target.value));break;case"footerText":c.current=Object(y.a)(Object(y.a)({},c.current),{},Object(v.a)({},i,e.target.value));break;case"title":a.current=e.target.value}t.setEditing()}return Object(M.jsxs)("form",{children:[Object(M.jsx)("h2",{children:"\u586b\u5199\u4f5c\u8005\u4fe1\u606f\uff08\u4e5f\u53ef\u4ee5\u4e0d\u586b\uff09"}),"\u540d\u5b57\uff1a",Object(M.jsx)("input",{type:"text",onChange:function(e){return s(e,"name")}}),Object(M.jsx)("br",{}),"\u90ae\u7bb1\uff1a",Object(M.jsx)("input",{type:"text",onChange:function(e){return s(e,"email")}}),Object(M.jsx)("br",{}),"\u7f51\u5740\uff1a",Object(M.jsx)("input",{type:"text",onChange:function(e){return s(e,"website")}}),Object(M.jsx)("br",{}),Object(M.jsx)("h2",{children:"\u586b\u5199\u9875\u9762\u4fe1\u606f\uff08\u4e5f\u53ef\u4ee5\u4e0d\u586b\uff0c\u4f46\u6700\u597d\u586b\uff09"}),"\u9875\u9762\u6807\u9898\uff1a",Object(M.jsx)("input",{type:"text",onChange:function(e){return s(e,"title")}}),Object(M.jsx)("br",{}),"\u9875\u811a\u6587\u5b57\uff1a",Object(M.jsx)("input",{type:"text",onChange:function(e){return s(e,"footerText")}}),Object(M.jsx)("br",{}),Object(M.jsx)("h2",{children:"\u586b\u5199\u5206\u7c7b\u4fe1\u606f"}),e.picsMetadata&&Object(M.jsx)(ae,{handleOutput:function(e){r.current=e,t.setEditing()},picsMetadata:e.picsMetadata}),Object(M.jsx)("input",{className:"form-button",type:"button",value:"\u786e\u5b9a",onClick:function(){e.picsMetadata&&(e.handleOutput({info:{author:Object(y.a)({},n.current),interface:Object(y.a)({},c.current),title:a.current},category:r.current}),t.setConfirmed())}})]})},se=function(e){Object(N.a)(n,e);var t=Object(S.a)(n);function n(e){var c;Object(w.a)(this,n),c=t.call(this,e),document.title="\u62c9\u8042\u8033\u5730\u533a",c.state={testFileList:null,formOutput:null,testImageJSX:Object(M.jsx)("div",{})};var i=new Image;return i.src="/sources/linmo/pics/\u8863\u670d/\u84dd\u8272\u536b\u8863.png",i.onload=function(e){e.target&&c.setState({testImageJSX:Object(M.jsx)("div",{style:{backgroundColor:"#fff"},children:Object(M.jsx)(A,{imageObjs:[i],canvasSize:[90,90],border:5})})})},c}return Object(C.a)(n,[{key:"getFileList",value:function(e){this.setState({testFileList:e})}},{key:"getFormOutput",value:function(e){this.setState({formOutput:e})}},{key:"genConfig",value:function(){if(!this.state.testFileList||!this.state.formOutput)return"";console.log(this.state.testFileList,this.state.formOutput);var e=U(this.state.formOutput,this.state.testFileList);return console.log(JSON.stringify(e)),JSON.stringify(e)}},{key:"render",value:function(){var e,t=this,n=this.state.testFileList,c="{}",i="";return n&&(e=W(n),c=JSON.stringify(e),i=function(e){for(var t=[],n=0,c=Array.from(e);n<c.length;n++){var i=c[n].webkitRelativePath.split("/");i[1]===L&&i[3]!==B&&t.push(T(i.slice(1).join("/")))}return _(t)}(n)),Object(M.jsx)("div",{className:"App",children:Object(M.jsxs)("header",{className:"App-header",children:[Object(M.jsx)("p",{children:"FBI WARNING"}),Object(M.jsx)("p",{children:"\u6b22\u8fce\u4f60\u6765\u5230\u795e\u79d8\u9875\u9762"}),this.state.testImageJSX,Object(M.jsx)(R,{handleOutput:function(e){return t.getFileList(e)}}),Object(M.jsx)(re,{handleOutput:function(e){return t.getFormOutput(e)},picsMetadata:e?e.data:void 0}),i,Object(M.jsx)(P,{fileContent:c,filename:"download_metadata_test.json",className:"",children:"metadata.json\u4e0b\u8f7d\u6d4b\u8bd5"}),Object(M.jsx)(P,{fileContent:this.genConfig(),filename:"download_config_test.json",className:"",children:"config.json\u4e0b\u8f7d\u6d4b\u8bd5"}),Object(M.jsx)(E,{imageFile:n?n[2]:null})]})})}}]),n}(a.a.Component);n(48);var oe=function(){var e=Object(i.useContext)(ce),t=Object(i.useState)({}),n=Object(c.a)(t,2),a=n[0],r=n[1],s=Object(i.useState)({}),u=Object(c.a)(s,2),l=u[0],j=u[1],d=Object(i.useMemo)((function(){return a.length?W(a):null}),[a]),f=Object(i.useMemo)((function(){return a.length&&l.info?JSON.stringify(U(l,a)):""}),[a,l]),b=Object(i.useMemo)((function(){return a.length?'{ "root": "/sources/'.concat((e=a)&&0!==e.length?e[0].webkitRelativePath.split("/")[0]:"",'/" }'):"";var e}),[a]);return Object(i.useEffect)((function(){document.title="\u521b\u5efa\u5c5e\u4e8e\u4f60\u7684\u634f\u8138\u6e38\u620f\uff01"})),Object(M.jsx)(ce.Provider,{value:ie(te.Editing),children:Object(M.jsx)("div",{className:"App",children:Object(M.jsxs)("header",{className:"app-header",children:[Object(M.jsx)("h2",{children:"!\u9192\u76ee! \u8bf7\u4f7f\u7528\u7535\u8111\u8fdb\u884c\u64cd\u4f5c"}),Object(M.jsx)("p",{children:"\u5728\u672c\u9875\u9762\u4e2d\uff0c\u6211\u4eec\u5c06\u4e00\u6b65\u4e00\u6b65\u521b\u5efa\u4e00\u4e2a\u81ea\u5df1\u7684\u634f\u8138\u6e38\u620f"}),Object(M.jsx)("p",{children:"\u521b\u5efa\u8fc7\u7a0b\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff1a"}),Object(M.jsx)("p",{children:"1.\u51c6\u5907\u597d\u4f60\u7684\u634f\u8138\u7d20\u6750"}),Object(M.jsx)("p",{children:"2.\u5236\u4f5c\u8d44\u6e90\u5305"}),Object(M.jsx)("p",{children:"3.\u4e0a\u4f20\u8d44\u6e90\u5305"}),Object(M.jsx)("h2",{children:"\u9996\u5148"}),Object(M.jsx)("p",{children:"\u7ed8\u5236\u4f60\u7684\u634f\u8138\u7d20\u6750\uff0c\u6240\u6709\u7684\u7d20\u6750\u5fc5\u987b\u662f\u6b63\u65b9\u5f62\u4e14\u5927\u5c0f\u4e00\u81f4\uff0c\u683c\u5f0f\u4e3apng"}),Object(M.jsxs)("p",{children:["\u5177\u4f53\u53ef\u4ee5\u53c2\u8003",Object(M.jsx)("a",{href:"https://github.com/mengrru/lm/tree/main/public/sources/example/pics",target:"_blank",children:"\u8fd9\u91cc"})]}),Object(M.jsx)("h2",{children:"\u7136\u540e\u6211\u4eec\u9700\u8981\u5236\u4f5c\u4e00\u4e2a\u8d44\u6e90\u5305"}),Object(M.jsxs)("p",{children:["\uff08\u4f60\u53ef\u4ee5",Object(M.jsx)("a",{href:"https://github.com/mengrru/lm/tree/main/public/sources/example",target:"_blank",children:"\u70b9\u51fb\u8fd9\u91cc"}),"\u67e5\u770b\u793a\u4f8b\u8d44\u6e90\u5305\uff09"]}),Object(M.jsx)("p",{children:"\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u53d6\u4e2a\u82f1\u6587\u540d\uff0c\u6bd4\u5982 example"}),Object(M.jsx)("p",{children:"\u8fdb\u5165\u8fd9\u4e2a\u6587\u4ef6\u5939\uff0c\u518d\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u53d6\u540d\u4e3a pics"}),Object(M.jsx)("p",{children:"\u8fdb\u5165 pics \u6587\u4ef6\u5939\uff0c\u6309\u7167\u4f60\u7684\u60f3\u6cd5\u65b0\u5efa\u82e5\u5e72\u4e2a\u6587\u4ef6\u5939\uff0c\u6bcf\u4e2a\u6587\u4ef6\u5939\u4ee3\u8868\u4f60\u7684\u7d20\u6750\u7684\u5206\u7c7b"}),Object(M.jsx)("p",{children:"\u6bd4\u5982 \u8868\u60c5 \u8863\u670d \u80cc\u666f \u7b49\u7b49"}),Object(M.jsx)("p",{children:"\u5728\u76f8\u5e94\u7684\u6587\u4ef6\u5939\u4e2d\u653e\u5165\u76f8\u5e94\u7684\u7d20\u6750"}),Object(M.jsx)("p",{children:"\u5bf9\u4e8e\u9ed8\u8ba4\u9009\u4e2d\u7684\u7d20\u6750\uff0c\u6587\u4ef6\u540d\u4ee5 default. \u5f00\u5934\uff0c\u6bd4\u5982\uff1a default.\u7b11\u8138.png "}),Object(M.jsx)("h2",{children:"\u5728\u8fd9\u91cc\u4f20\u5165\u521a\u624d\u7b2c\u4e00\u6b21\u5efa\u597d\u7684\u6587\u4ef6\u5939\uff08\u6bd4\u5982 example\uff09"}),Object(M.jsx)(R,{handleOutput:function(t){e.setEditing(),r(t)}}),Object(M.jsx)(re,{handleOutput:function(e){return j(e)},picsMetadata:d?d.data:void 0}),Object(M.jsx)("h2",{children:"\u586b\u5b8c\u70b9\u51fb\u786e\u5b9a\u540e\u4f1a\u51fa\u73b0\u4e09\u4e2a\u4e0b\u8f7d\u6309\u94ae\uff1a"}),Object(M.jsx)(ce.Consumer,{children:function(e){return e.action===te.Confirmed?Object(M.jsxs)("div",{children:[Object(M.jsx)(P,{fileContent:d?JSON.stringify(d):"{}",filename:"metadata.json",className:"download-config-link",children:"\u4e0b\u8f7dmetadata.json"}),Object(M.jsx)(P,{fileContent:f,filename:"config.json",className:"download-config-link",children:"\u4e0b\u8f7dconfig.json"}),Object(M.jsx)(P,{fileContent:b,filename:"root.json",className:"download-config-link",children:"\u4e0b\u8f7droot.json"})]}):Object(M.jsx)("div",{})}}),Object(M.jsx)("h2",{children:"\u4e0a\u9762\u4e09\u4e2a\u6587\u4ef6\u4e0b\u8f7d\u540e"}),Object(M.jsx)("p",{children:"\u8fdb\u5165\u521a\u624d\u521b\u5efa\u7684 example \u6587\u4ef6\u5939\uff0c\u5c06\u8fd9\u4e09\u4e2a\u6587\u4ef6\u653e\u5230\u6587\u4ef6\u5939\u4e2d"}),Object(M.jsx)("p",{children:"\u8fd9\u6837\u4f60\u7684\u8d44\u6e90\u5305\u5c31\u5b8c\u6210\u5566\uff01\u6492\u82b1\u2728"}),Object(M.jsx)("h2",{children:"\u63a5\u4e0b\u6765\u8fdb\u5165\u6700\u540e\u4e00\u6b65"}),Object(M.jsx)("p",{children:"\u4e0a\u4f20\u4f60\u7684\u8d44\u6e90\u5305\u5230\u53ef\u4ee5\u88ab\u8bbf\u95ee\u5230\u7684\u5730\u65b9\uff0c\u6709\u4e24\u79cd\u9009\u62e9\uff1a"}),Object(M.jsxs)("p",{children:["1. \u901a\u8fc7\u63d0pr\u7684\u65b9\u5f0f\u4e0a\u4f20\u5230",Object(M.jsx)("a",{href:"https://github.com/mengrru/lm-instance",children:"\u6b64\u4ed3\u5e93"}),"\u7684 main \u5206\u652f\u7684 sources \u76ee\u5f55\u4e0b"]}),Object(M.jsxs)("p",{children:["2. \u81ea\u884c\u8d2d\u4e70\u9759\u6001\u5b58\u50a8\u670d\u52a1\uff08\u5982\u963f\u91cc\u4e91OSS\uff09\u4e0a\u4f20\uff0c\u5e76\u5c06 root.json \u4e2d\u7684 root \u5b57\u6bb5\u6539\u4e3a\u4f60\u7684\u8d44\u6e90\u6240\u5728\u7684\u7edd\u5bf9\u5730\u5740\uff0c\u7136\u540e\u901a\u8fc7\u63d0pr\u7684\u65b9\u5f0f\u4e0a\u4f20 root.json \u5230",Object(M.jsx)("a",{href:"https://github.com/mengrru/lm-instance",children:"\u6b64\u4ed3\u5e93"}),"\u7684 main \u5206\u652f\u7684 sources \u76ee\u5f55\u4e0b"]}),Object(M.jsx)("p",{children:"\u5982\u679c\u641e\u4e0d\u61c2\u600e\u6837\u4e0a\u4f20\uff0c\u53ef\u4ee5\u76f4\u63a5\u53d1\u90ae\u4ef6\u5230 mengrru@outlook.com \u8ba9\u6211\u6765\u5e2e\u4f60\u4e0a\u4f20"}),Object(M.jsx)("p",{children:"-"}),Object(M.jsx)("p",{children:Object(M.jsx)(o.b,{to:"/",children:"\u8fd4\u56de\u9996\u9875"})}),Object(M.jsx)("p",{children:"-"})]})})})};n(49);function ue(){document.title="\u6b22\u8fce\u5149\u4e34";var e=[["Example","example"],["\u634f\u4e00\u4e2a\u6797\u58a8","linmo"]].map((function(e){return Object(M.jsx)(o.b,{className:"index-btn",to:"/".concat(e[1]),children:e[0]},e[1])}));return Object(M.jsxs)("div",{className:"index-container",children:[Object(M.jsxs)("div",{children:["\u76ee\u524d\u672c\u5b9e\u4f8b\u53ef\u4ee5\u6e38\u73a9\u7684\u634f\u8138\u6e38\u620f\uff1a",Object(M.jsx)("br",{}),e]}),Object(M.jsx)(o.b,{className:"index-link",to:"/create",children:"\u6211\u4e5f\u8981\u521b\u5efa\u4e00\u4e2a\u634f\u8138\u6e38\u620f"})]})}n(50);function le(e){var t=Object(i.useContext)(b),n=Object(i.useState)(""),a=Object(c.a)(n,2),r=a[0],s=a[1],o=Object(i.useState)(!0),u=Object(c.a)(o,2),l=u[0],j=u[1],d=Object(i.useMemo)((function(){return r?function(e,t,n,c){for(var i=Object.keys(n).filter((function(e){return!n[e].info.hide})).sort((function(e,t){return e<t?1:-1})),a=i.length,r=z.Md5.hashStr(c),s=r.length,o=Math.floor(s/a),u=parseInt(Array(o).fill("F").join(""),16),l=X(e,n,t.data),j=0;j<a;j++){var d=parseInt(r.slice(j*o,j*o+o),16);d===u&&d--;var f=i[j],b=n[f].items.slice().sort((function(e,t){return e.title<t.title?1:-1})),h=b.length,O=Math.floor(d/(u/h));l[f]=H(e,n,t.data,f,b[O].pic.picId)}return l}(t.root,t.metadata,t.config.category,r):X(t.root,t.config.category,t.metadata.data)}),[r]),f=Object(i.useRef)(null),h=Object(i.useRef)(null);Object(i.useEffect)((function(){p(d).then((function(e){f.current&&(f.current.src=e.toDataURL(),j(!1))}))}),[r]);return Object(M.jsxs)("div",{className:"auto-container",children:[Object(M.jsx)("h2",{className:"auto-title",children:t.config.info.title}),Object(M.jsxs)("div",{className:"auto-image-container",children:[Object(M.jsx)("span",{style:l?{display:"inline"}:{display:"none"},children:"\u52aa\u529b\u52a0\u8f7d\u4e2d..."}),Object(M.jsx)("img",{style:l?{display:"none"}:{display:"inline"},ref:f,alt:t.config.info.title})]}),Object(M.jsxs)("div",{className:"auto-input-container",children:[Object(M.jsx)("input",{ref:h,className:"auto-input",type:"text",placeholder:"\u8f93\u5165\u4f60\u7684\u540d\u5b57\u3001id\u6216\u5176\u5b83"}),Object(M.jsx)("br",{}),Object(M.jsx)("button",{className:"auto-button",onClick:function(){return j(!0),void s(h.current?h.current.value:"")},children:"\u70b9\u51fb\u83b7\u5f97\u56fe\u7247"})]}),Object(M.jsx)("div",{className:"auto-link-container",children:Object(M.jsx)("a",{href:"/"+e.rootName,children:"\u53bb\u634f\u8138"})})]})}function je(){var e=function(){var e=Object(i.useState)({}),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)({}),s=Object(c.a)(r,2),o=s[0],u=s[1],l=Object(i.useState)(""),j=Object(c.a)(l,2),d=j[0],f=j[1],b=Object(i.useState)(document.body.clientWidth),h=Object(c.a)(b,2),O=h[0],m=h[1];return{config:n,metadata:o,root:d,width:Object(i.useMemo)((function(){var e=.7*O*.94;return e>400?376:e<330?310.2:e}),[O]),setRoot:f,setMetadata:u,setConfig:a,updateClientWidth:function(){m(document.body.clientWidth)}}}();return Object(M.jsx)(b.Provider,{value:e,children:Object(M.jsxs)(o.a,{children:[Object(M.jsx)(F,{}),Object(M.jsxs)(u.c,{children:[Object(M.jsx)(u.a,{path:"/create",children:Object(M.jsx)(oe,{})}),Object(M.jsx)(u.a,{path:"/test",children:Object(M.jsx)(se,{})}),Object(M.jsx)(u.a,{path:"/:id/:auto",children:Object(M.jsx)(de,{})}),Object(M.jsx)(u.a,{path:"/:id",children:Object(M.jsx)(de,{})}),Object(M.jsx)(u.a,{path:"/",children:Object(M.jsx)(ue,{})})]})]})})}var de=Object(u.f)((function(e){var t=Object(i.useContext)(b),n=Object(i.useMemo)((function(){return e.match.params.id}),[e.match]),a=Object(i.useMemo)((function(){return"auto"===e.match.params.auto}),[e.match]),r=Object(i.useState)(!1),s=Object(c.a)(r,2),o=s[0],u=s[1],l=Object(i.useState)(""),j=Object(c.a)(l,2),d=j[0],f=j[1];if(Object(i.useEffect)((function(){t.updateClientWidth()})),Object(i.useEffect)((function(){u(!0),O("/sources/"+n+"/root.json").then((function(e){var n=JSON.parse(e);return t.setRoot(n.root),n.root})).then((function(e){return f(e+n+".css"),e})).then((function(e){Promise.all([O(e+"config.json?q="+Math.random()).then((function(e){return t.setConfig(JSON.parse(e))})),O(e+"metadata.json?q="+Math.random()).then((function(e){return t.setMetadata(JSON.parse(e))}))]).then((function(e){u(!1)})).catch((function(e){console.error(e)}))}))}),[n]),o)return Object(M.jsx)("div",{children:"loading"});try{return document.title=t.config?t.config.info.title:"",Object(M.jsxs)("div",{children:[Object(M.jsx)("link",{rel:"stylesheet",type:"text/css",href:d}),a?Object(M.jsx)(le,{rootName:n}):Object(M.jsx)(ee,{rootName:n})]})}catch(h){return Object(M.jsx)("div",{children:"\u51fa\u9519\u5566QAQ"})}}));s.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(je,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.4984eb5e.chunk.js.map